\documentclass[xcolor=x11names,compress]{beamer}

\usepackage{fontspec}
\usepackage{pgfplots}
\usepackage{tikz}
\usepackage{amsmath, amssymb, amsfonts}
\usepackage{bm}
\usepackage{eso-pic}
\usepackage{graphicx}
\usepackage{color}
\usepackage{xcolor}

\pgfplotsset{compat=1.15}
\usetikzlibrary{positioning, shapes, calc, arrows}

%% Beamer Layout %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\useinnertheme{default}
\usefonttheme{serif}
\usepackage{palatino}
\usepackage[T1]{fontenc}
\usepackage[default]{lato}

\setbeamerfont{frametitle}{}

\definecolor{BHKpresentationDark}{RGB}{114,133,176}
\definecolor{BHKpresentationDarkGrey}{RGB}{103,116,128}
\definecolor{BHKblue}{RGB}{51,105,153}

\setbeamerfont{title like}{shape=\scshape}
\setbeamercolor*{frametitle}{fg=BHKpresentationDark} 
\setbeamercolor*{lower separation line head}{bg=BHKblue} 
\setbeamercolor*{normal text}{fg=BHKpresentationDarkGrey,bg=white} 
\setbeamercolor*{alerted text}{fg=BHKblue} 
\setbeamercolor*{example text}{fg=black} 
\setbeamercolor*{item}{fg=BHKpresentationDark,bg=gray} 
\setbeamercolor{enumerate item}{fg=BHKpresentationDark}
\setbeamercolor*{structure}{fg=black} 
\setbeamercolor*{palette tertiary}{fg=black,bg=black!10} 
\setbeamercolor*{palette quaternary}{fg=black,bg=black!10} 
\setbeamercovered{transparent}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}{%
    \begin{beamercolorbox}[wd=\paperwidth]{footlinecolor}
        \includegraphics[width=\textwidth]{bar_footline.pdf}
    \end{beamercolorbox}%
}

\setbeamertemplate{frametitle}[default][center]
\setbeamertemplate{caption}[numbered]
\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}[subsections numbered]

\begin{document}
%%%% title slide %%%%%
{\setbeamertemplate{footline}{} 
    \begin{frame}
    
    \vspace{-1.5cm}
    \hfill\makebox[0.2\paperwidth]{\includegraphics[width=0.4\textwidth]{logo_wtext}}
    \begin{flushleft}
        \hspace{-1cm}\includegraphics[width=0.8\textwidth, height=0.4em]{title_line.pdf}\hfill
        
        \title{
            \begin{flushleft}{\huge \color{BHKpresentationDark} Convolutional Neural Networks Summary} 
        \end{flushleft}}
        
        % \date{\today}
        \date{$~~$}
        \author[Joan]{\begin{flushleft}\vspace{-1cm} Joan Marc√® i Igual\end{flushleft}}
        \titlepage
    \end{flushleft}
\end{frame}
}

\begin{frame}{Table of Contents}
	\tableofcontents
\end{frame}

\section{Introduction}
\begin{frame}{\secname}
	Neural Networks are a type of supervised learning. So we have a set of labeled data:
	$$\{(x^{(1)}, y^{(1)}), (x^{(2)}, y^{(2)}), ..., (x^{(m)}, y^{(m)})\}$$
	
	We want to use it to predict new data $\hat{y} = f(x)$
	
	\textbf{Problem}: search the proper $f(x)$
\end{frame}
\section{Neural Networks}
\begin{frame}{\secname}
	\input{neural_network.tikz.tex}
\end{frame}
\subsection{Parameters}
\begin{frame}{\subsecname}
    \begin{columns}[t]
        \column{.6\textwidth}
        \begin{itemize}
            \item $l$: Current layer
            \item $w_{i, j}^{[l]}$: Weight from neuron $j$ to $i$ at layer $l$
            \item $b_{i}^{[l]}$: Bias for neuron $i$ at layer $l$
            \item $a_{j}^{[l]} = g\left( \left( \sum_{j}^{n[l-1]}  w_{i, j}^{[l]} \cdot a_{j} \right) + b_i^{[l]} \right)$
            \item $\bm{a}^{[l]} = g(\bm{W}^{[l]}\cdot \bm{a}^{[l - 1]} + \bm{b}^{[l]})$: Activations for layer $l$
            \item $g(x)$: Activation function
        \end{itemize}
        \column{.5\textwidth}
        \centering
        \input{neural_activations.tikz.tex}
    \end{columns}
\end{frame}
\begin{frame}
    \begin{columns}
        \column{.6\textwidth}
        \begin{block}{Cost function}
            $$
            J(\bm{W}, \bm{b}, \hat{\bm{y}}, \bm{y}) = \frac{1}{m} \sum_{i=1}^{m} \mathcal{L}(\hat{\bm{y}}^{(i)}, \bm{y}^{(i)})
            $$
        \end{block}
        \begin{block}{Loss function}
            $$
            \mathcal{L}(\hat{\bm{y}}, \bm{y}) = ||\hat{\bm{y}} - \bm{y}||^2
            $$
        \end{block}
        \column{.4\textwidth}
        We want to minimize $J(\bm{W}, \bm{b}, \hat{\bm{y}}, \bm{y})$ to get better results for $\hat{y}$.
        \begin{block}{Parameters update}
            \begin{align*}
                \bm{W} &:= \bm{W} - \alpha*\frac{\partial J}{\partial \bm{W}} \\
                \bm{b} &:= \bm{b} - \alpha*\frac{\partial J}{\partial \bm{b}}
            \end{align*}
        \end{block}
    \end{columns}
\end{frame}


\end{document}