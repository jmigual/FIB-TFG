% !TEX spellcheck = en_US
% !TEX encoding = UTF-8

\documentclass[a4paper, 12pt]{book}

% \usepackage{scrextend} % KOMA-script
\usepackage{graphicx}
\usepackage[tuenc]{fontspec}
\usepackage{xcolor}

\usepackage{csquotes} % Required by biblatex
\usepackage[british]{babel}
\usepackage[
  backend=biber, 
  sorting=none, 
  dateabbrev=false, 
  block=ragged,
  style=ieee
]{biblatex}

\usepackage{tikz}
\usepackage{pgfgantt}

\usepackage{amsmath, amsfonts, amssymb} % Font symbols
\usepackage{bm}

\usepackage[format=plain,
            labelfont={bf,it},
            textfont=it]{caption}
\usepackage{subcaption}
\usepackage{fancyvrb} % Verbatim improvements

\usepackage{float}
\usepackage{enumitem} % Continuous enumeration
\usepackage{ragged2e} % Justify

\usepackage{array} % Table improvements
\usepackage{multirow} % Multiple rows in tables
\usepackage{makecell} % Cell colors in tables
\usepackage{hhline}   % Better line separation in tables
\usepackage{tocloft}

%%%%%%%%% HYPERREF %%%%%%%%%%
\usepackage[colorlinks=true,
linkcolor={red!30!black},
citecolor={blue!50!black},
urlcolor={blue!80!black}]{hyperref}

% Must be loaded after hyperref
\usepackage[acronym, toc, numberline]{glossaries}
\usepackage[bindingoffset=1.5cm, textwidth=15cm, top=3cm, bottom=3cm]{geometry}

\usetikzlibrary{positioning}

\setmainfont{CMU Serif}
\setmonofont[Scale=MatchLowercase]{Source Code Pro}
\setlength{\parskip}{\baselineskip}

\newcolumntype{P}[1]{>{\raggedright\arraybackslash}p{#1}}

% Fix bibliography parameters for overfull
% \setcounter{biburlnumpenalty}{5000}
% \setcounter{biburllcpenalty}{7000}
% \setcounter{biburlucpenalty}{8000}


% Bibliography
\addbibresource{../bibliography/mendeley.bib}

\newcommand{\secc}{\ifdef{\chapter}{\chapter}{\section}}
\newcommand{\ssecc}{\ifdef{\chapter}{\section}{\subsection}}
\newcommand{\sssecc}{\ifdef{\chapter}{\subsection}{\subsubsection}}

\newcommand{\seccn}{\ifdef{\chapter}{chapter}{section}}
\newcommand{\sseccn}{\ifdef{\chapter}{section}{subsection}}
\newcommand{\ssseccn}{\ifdef{\chapter}{subsection}{subsubsection}}
\newcommand{\Th}{\textsuperscript{th}}

\newcommand{\addphantomsec}[2]{%
  \cleardoublepage
  \phantomsection
  \addcontentsline{toc}{#2}{\numberline{}#1}
  \secc*{#1}
}

% Special heading, indenting the name on table of contents
\defbibheading{bibintocindent}[\refname]{%
  \secc*{#1}%
  \addcontentsline{toc}{\seccn}{\protect\numberline{}#1}%
  \markboth{\MakeUppercase{#1}}{\MakeUppercase{#1}}
}

\ifdef{\chapter}{
  \renewcommand\cftchapafterpnum{\vskip15pt}
  \renewcommand\cftsecafterpnum{\vskip6pt}
  \renewcommand\cftsubsecafterpnum{\vskip3pt}
}{
  \renewcommand\cftsecafterpnum{\vskip15pt}
  \renewcommand\cftsubsecafterpnum{\vskip6pt}
}

\renewcommand\cftsubsubsecafterpnum{\vskip3pt}
\renewcommand\cftfigafterpnum{\vskip5pt}
\renewcommand\cfttabafterpnum{\vskip5pt}


% List configuration
\setlist[description]{topsep=0em}

\input{glossary_definitions.tex}

%%%%%%%%%%%% BEGIN OF DOCUMENT %%%%%%%%%%%%%%%%%%
\begin{document}

% Title page can be commented to remove it
\begin{titlepage}
  \centering
  \vspace{1.5cm}
  {\huge \textbf{\textsc{Unlock the potential of medical imaging data using deep learning}} \par}
  \vspace{1cm}
  {\Large \textit{Joan Marcè i Igual}\par}
  \vfill
  {Director: Dr.~Benjamin \textsc{Haibe-Kains} \par}
  {Tutor: Dr.~Maria José \textsc{Serna Iglesias} \par}
    
  \vfill

  \includegraphics[width=0.3\textwidth]{images/logo_FIB}\par
  
  \vspace{.2cm}
  
  \includegraphics[width=0.6\textwidth]{images/logo_upc}\par
  
  \vfill
  
  % Bottom of the page
  {\Large Computer Science Specialization \par}
  {\LARGE Facultat d'Informàtica de Barcelona \par}
  {\LARGE Universitat Politècnica de Catalunya \par}
  {\LARGE 2018 \par}
\end{titlepage}

\cleardoublepage
\tableofcontents

\cleardoublepage
\phantomsection
\addcontentsline{toc}{\seccn}{\numberline{}List of Figures}
\listoffigures

\cleardoublepage
\phantomsection
\addcontentsline{toc}{\seccn}{\numberline{}List of Tables}
\listoftables

% Just comment this lines to enable/disable some parts of the document
\cleardoublepage
\include{001_context}

\cleardoublepage
\include{002_planning}

\cleardoublepage
\include{003_design}

\cleardoublepage
\printglossaries

\emergencystretch=1em
% \addphantomsec{References}{\seccn}
\printbibliography[heading=bibintocindent, title={References}]{}

\end{document}